diff --git a/configure.in b/configure.in
index 9a64b45..0e2f163 100644
--- a/configure.in
+++ b/configure.in
@@ -18,6 +21,23 @@ AC_ARG_ENABLE(debug,[  --enable-debug      Turns on rpcbind debugging],
 	esac],[debug=false])
 AM_CONDITIONAL(DEBUG, test x$debug = xtrue)
 
+AC_ARG_ENABLE(warmstarts,[  --enable-warmstarts  Enables Warm Starts], 
+	[case "${enableval}" in
+		yes) warmstarts=true ;;
+		no)  warmstarts=no ;;
+		*) AC_MSG_ERROR(bad value ${enableval} for --enable-warmstarts) ;;
+	esac],[warmstarts=false])
+AM_CONDITIONAL(WARMSTART, test x$warmstarts = xtrue)
+
+if test "$warmstarts" = "true" ; then
+	AC_ARG_WITH(statedir,
+		[  --with-statedir=/foo use state dir /foo [/tmp]],
+    	statedir=$withval,
+		statedir=/tmp)
+		AC_SUBST(statedir)
+	AC_DEFINE_UNQUOTED(RPCBIND_STATEDIR, "$statedir", [This defines the location where the state files will be kept for warm starts])
+fi
+
 AC_CHECK_HEADERS([arpa/inet.h fcntl.h netdb.h \
                   netinet/in.h stdlib.h string.h \
                   sys/param.h sys/socket.h \
diff --git a/man/rpcbind.8 b/man/rpcbind.8
index 2d59ce8..7985f0f 100644
--- a/man/rpcbind.8
+++ b/man/rpcbind.8
@@ -131,6 +131,14 @@ to use non-privileged ports for outgoing connections, preventing non-privileged
 clients from using
 .Nm
 to connect to services from a privileged port.
+.It Fl w
+Cause
+.Nm
+to do a "warm start" by read a state file when
+.Nm
+starts up. The state file is created when
+.Nm
+terminates.
 .El
 .Sh NOTES
 All RPC servers must be restarted if
diff --git a/src/Makefile.am b/src/Makefile.am
index 52d3857..fd80847 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -1,5 +1,14 @@
 INCLUDES = -I$(srcdir)/tirpc -DPORTMAP -DINET6 -DVERSION="\"$(VERSION)\"" \
                                                 -D_GNU_SOURCE -Wall -pipe
+if DEBUG
+INCLUDES +=	-DRPCBIND_DEBUG -DSVC_RUN_DEBUG -DDEBUG_RMTCALL
+INCLUDES +=	-DND_DEBUG -DBIND_DEBUG
+endif
+
+if WARMSTART
+INCLUDES +=	-DWARMSTART
+endif
+
 
 bin_PROGRAMS = rpcbind rpcinfo
 
@@ -18,10 +27,6 @@ rpcbind_LDFLAGS = -lpthread -ltirpc
 rpcbind_LDADD = $(LIB_TIRPC)
 AM_CPPFLAGS = -I/usr/include/tirpc -DCHECK_LOCAL -DPORTMAP \
                        -DFACILITY=LOG_MAIL -DSEVERITY=LOG_INFO
-if DEBUG
-INCLUDES +=	-DRPCBIND_DEBUG -DSVC_RUN_DEBUG -DDEBUG_RMTCALL
-INCLUDES +=	-DND_DEBUG -DBIND_DEBUG
-endif
 
 $(rpcbind_OBJECTS) :    security.o util.o check_bound.o pmap_svc.o \
                         rpcb_svc.o rpcb_svc_com.o rpcb_svc_4.o \
diff --git a/src/warmstart.c b/src/warmstart.c
index 4a40639..6a50c41 100644
--- a/src/warmstart.c
+++ b/src/warmstart.c
@@ -46,17 +46,21 @@
 #include <syslog.h>
 #include <unistd.h>
 
+#include "config.h"
 #include "rpcbind.h"
 
 /*
  * XXX this code is unsafe and is not used. It should be made safe.
  */
 
+#ifndef RPCBIND_STATEDIR
+#define RPCBIND_STATEDIR "/tmp"
+#endif
 
 /* These files keep the pmap_list and rpcb_list in XDR format */
-#define	RPCBFILE	"/tmp/rpcbind.file"
+#define	RPCBFILE	RPCBIND_STATEDIR "/rpcbind.file"
 #ifdef PORTMAP
-#define	PMAPFILE	"/tmp/portmap.file"
+#define	PMAPFILE	RPCBIND_STATEDIR "/portmap.file"
 #endif
 
 static bool_t write_struct __P((char *, xdrproc_t, void *));
